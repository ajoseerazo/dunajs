<html>
  <head>
    <script src="./duna.js"></script>
  </head>

  <body>
    <h1>Todo App</h1>

    <div id="todo-app">
      <div @each="task in tasks">
        <div @click="clickOnTask">{ task }</div>
      </div>

      <input @change="changeInput" @value="value" />
      <button @click="addTask" style="margin-top: 20px">Add Task</button>

      {value}
    </div>
    <!--<div id="greetings">
      <h1>El texto es: { text.toLowerCase() }</h1>
      <button @click="onClick">{ buttonText }</button>
    </div>

    <div id="text-example" @text="text"></div>

    <input id="input" @change="onChange" @value="value" />
    <button id="button" @click="onClick">{ buttonText }</button>

    <br />
    <br />
    <br />

    <button id="button-2" @click="onClick">
      Clicked { count } { count === 1 ? 'time' : 'times' }
    </button>

    <script>
      // Greetings Component
      const greeting = new Duna({
        state: {
          text: "Hello World!",
          buttonText: "testing",
        },
        events: {
          onClick: function () {
            this.state.text = "Hola que tal?";
            this.state.buttonText = "Que más pues?";
          },
        },
      });
      greeting.mount("#greetings");

      const text = new Duna({
        state: {
          text: "<h1>This is the text</h1>",
        },
      });
      text.mount("#text-example");

      // Button Component
      const button = new Duna({
        state: {
          buttonText: "Hola",
        },
        events: {
          onClick: function () {
            this.state.buttonText = "Que más pues?";
            greeting.state.text = input.state.value;
          },
        },
      });
      button.mount("#button");

      // Input Component
      const input = new Duna({
        events: {
          onChange: function (e) {
            input.state.value = e.target.value;
          },
        },
        state: {
          value: "Amilcar",
        },
      });
      input.mount("#input");

      const button2 = new Duna({
        state: {
          count: 0,
        },
        events: {
          onClick: function () {
            this.state.count += 1;
          },
        },
      });
      button2.mount("#button-2");
    </script>-->

    <script>
      const todo = new Duna({
        state: {
          tasks: [],
          value: "",
        },
        events: {
          addTask() {
            console.log("Input State", this.state.value);
            this.state.tasks = this.state.tasks.concat([this.state.value]);
            this.state.value = "";
          },
          changeInput(value) {
            console.log(value);
            this.state.value = value;
          },
          clickOnTask(e) {
            alert(e.target.innerHTML);
          }
        },
      });

      todo.mount("#todo-app");
    </script>
  </body>
</html>
