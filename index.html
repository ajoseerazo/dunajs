<html>
  <head>
    <script src="./duna.js"></script>
  </head>

  <body>
    <!--<h1 id="h1">
      <span><span>Hola</span><span> { text }</span></span>
      <button @click="onClick">{ buttonText }</button>
      <b>{ text }</b>
      <p>{ buttonText.toLowerCase() }</p>
      <div>{ value }</div>
      <input @changeValue="changeInput" @value="value" />
    </h1>-->

    <!--<button id="button-1" @click="onClick">{ buttonText }</button>

    <input id="input-1" @value="value" />-->

    <!--<h1>Todo App</h1>-->
    <div id="app">
      <app-counter></app-counter>
    </div>

    <div id="counter">
      <h1>Counter</h1>
      <button @click="decrement">-</button>
      <span>value: { counter }</span>
      <button @click="increment">+</button>
    </div>

    <app-counter-2></app-counter-2>

    <!--<app-drawer></app-drawer>-->

    <!--<div id="todo-app">
      <div @each="task in tasks">
        <li @click="clickOnTask">
          <!-<input
            type="checkbox"
            @checked="{task.done}"
            @change="onChangeTaskCheckbox"
          />--
          <span>{ value }: { task.title }</span>
          <!-<span>{ value }</span>--
        </li>
      </div>

      <input @changeValue="changeInput" @value="value" />

      <button @click="addTask" style="margin-top: 20px">
        <span>{ buttonText }</span>
      </button>

      {value}

      <br />
      <br />

      <div>
        <input
          @checked="{checked}"
          @change="onChangeCheckbox"
          type="checkbox"
        />
        Checked
      </div>
    </div>

    <!-<br />
    <br />
    <br />
    <br />-->

    <!--<div id="reactive">
      <button @click="handleClick">Count: {count}</button>

      { countText.toLowerCase() } {count === 1 ? 'time' : 'times'}

      <p>{count} * 2 = { count * doubled }</p>
      <p>{count} * 2 = { doubled }</p>
      <p>{doubled} * 2 = {quadrupled}</p>
    </div>-->
    <!--<div id="greetings">
      <h1>El texto es: { text.toLowerCase() }</h1>
      <button @click="onClick">{ buttonText }</button>
    </div>

    <div id="text-example" @text="text"></div>

    <input id="input" @changeValue="onChange" @value="value" />
    <button id="button" @click="onClick">{ buttonText }</button>

    <br />
    <br />
    <br />

    <button id="button-2" @click="onClick">
      Clicked { count } { count === 1 ? 'time' : 'times' }
    </button>

    <script>
      // Greetings Component
      const greeting = new Duna({
        state: {
          text: "Hello World!",
          buttonText: "testing",
        },
        events: {
          onClick: function () {
            this.state.text = "Hola que tal?";
            this.state.buttonText = "Que más pues?";
          },
        },
      });
      greeting.mount("#greetings");

      const text = new Duna({
        state: {
          text: "<h1>This is the text</h1>",
        },
      });
      text.mount("#text-example");

      // Button Component
      const button = new Duna({
        state: {
          buttonText: "Hola",
        },
        events: {
          onClick: function () {
            this.state.buttonText = "Que más pues?";
            greeting.state.text = input.state.value;
          },
        },
      });
      button.mount("#button");

      // Input Component
      const input = new Duna({
        events: {
          onChange: function (e) {
            input.state.value = e.target.value;
          },
        },
        state: {
          value: "Amilcar",
        },
      });
      input.mount("#input");

      const button2 = new Duna({
        state: {
          count: 0,
        },
        events: {
          onClick: function () {
            this.state.count += 1;
          },
        },
      });
      button2.mount("#button-2");
    </script>-->

    <script>
      /*const todo = new Duna({
        state: {
          tasks: [
            {
              title: "This is the first task",
              done: true,
            },
            {
              title: "This is another task",
              done: false,
            },
          ],
          value: "Hello",
          buttonText: "Add new task",
          checked: true,
        },
        events: {
          addTask() {
            if (this.state.value) {
              console.log("Input State", this.state.value);
              this.state.tasks = this.state.tasks.concat([
                {
                  title: this.state.value,
                },
              ]);
              // this.state.value = "";
              this.state.buttonText = "Add other task";
            }
          },
          changeInput(value) {
            this.state.value = value;
          },
          clickOnTask(index) {
            console.log(this.state.tasks[index]);
            this.state.checked = !this.state.checked;
          },
          onChangeTaskCheckbox(checked, index) {
            const newTaks = [];
            for (let i = 0; i < this.state.tasks.length; i++) {
              if (i !== 1) {
                newTaks.push(this.state.tasks[i]);
              } else {
                newTaks.push({
                  ...this.state.tasks[i],
                  done: checked,
                });
              }
            }

            console.log("New Tasks", newTaks);

            this.state.tasks = newTaks;

            console.log(this.state);
          },
          onChangeCheckbox(checked) {
            this.state.checked = checked;
          },
        },
      });*/

      class Counter extends DunaElement {
        constructor() {
          super();
        }

        state = {
          count: 10,
        };

        increaseCount = () => this.state.count++;

        render() {
          return html`
            <div>
              counter ${this.state.count}
              <button class="button">Click me ${this.state.count}!!!</button>
            </div>
          `;
        }

        events = [["button", "click", this.increaseCount]];
      }

      /*const counter = new Duna2({
        state: {
          counter: 1,
        },
        events: {
          increment() {
            this.state.counter++;
          },
          decrement() {
            this.state.counter--;
          },
        },
        methods: {},
      });*/

      class Counter2 extends Duna2 {
        state = {
          counter: 1,
        };

        // @reactive()
        counter = 1;

        events = {
          increment() {
            this.state.counter++;
          },
          decrement() {
            this.state.counter--;
          },
        };

        methods = {};

        template = () => `
          <div>
            <button class="button" @click="decrement">Decrement</button>
            counter { counter }
            <button class="button" @click="increment">Increment</button>
          </div>
        `;
      }

      // counter.mount("#counter");

      // const template = `<counter></counter>`;

      /*const components = {
        counter: Counter,
      };*/

      //const app = document.getElementById("app");
      // app.innerHTML = template;

      /*for (let component in components) {
        const [el] = app.getElementsByTagName(component);

        if (el) {
          const componentObject = new components[component]();
          componentObject.mount(el);
        }
      }*/

      // console.log(document.getElementsByTagName("counter"));
      // c.mount("app");

      /*window.customElements.define("app-counter", Counter);
      window.customElements.define("app-counter-2", Counter2);*/

      DunaApp.define("app-counter-2", Counter2);
    </script>

    <!--<script>
      const input = new Duna({
        state: {
          value: "Super value",
        },
      });
      input.mount("#input-1");

      const button = new Duna({
        state: {
          buttonText: "Click on me!",
        },
        events: {
          onClick() {
            this.state.buttonText = "Clicked";
            input.state.value = "Puta";
          },
        },
      });
      button.mount("#button-1");
    </script>-->

    <!--<script>
      const reactive = new Duna({
        state: {
          count: 1,
          doubled: 2,
          quadrupled: 4,
          countText: "Hello",
        },
        events: {
          handleClick() {
            this.state.count += 1;
            this.state.doubled = this.state.count * 2;
            this.state.quadrupled = this.state.doubled * 2;
          },
        },
      });
      reactive.mount("#reactive");
    </script>-->

    <!--<script>
      const h1 = new Duna({
        state: {
          text: "Hola!",
          buttonText: "Click Me!",
          value: "",
        },
        events: {
          onClick() {
            alert("Mamalo");
          },
          changeInput(value) {
            this.state.value = value;
          },
        },
      });
      h1.mount("#h1");

      const button1 = new Duna({
        events: {
          onClick() {
            h1.state.text = `Como estas ${h1.state.value}?`;
            h1.state.buttonText = "Fuck";
          },
        },
      });
      button1.mount("#button-1");
    </script>-->
  </body>
</html>
